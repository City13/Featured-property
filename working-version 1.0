<?php
$hero_video = get_sub_field('hero_background_video');
$hero_image = get_sub_field('hero_background_image');
$hero_title = get_sub_field('hero_property_title');
$hero_tagline = get_sub_field('hero_tagline');
$hero_book_link = get_sub_field('hero_book_now_link');
$hero_more_link = get_sub_field('hero_details_link');
?>

<section class="featured-hero">
<?php if ($hero_video && wp_is_mobile() === false): ?>
  <video autoplay muted playsinline class="hero-bg-video">
    <source src="<?php echo esc_url($hero_video); ?>" type="video/mp4">
  </video>
<?php endif; ?>

  <?php if ($hero_image): ?>
    <img src="<?php echo esc_url($hero_image); ?>" class="hero-bg-image" alt="Hero Background">
  <?php endif; ?>

  <div class="hero-overlay"></div>

  <div class="hero-content">
        <?php if (get_sub_field('header_present')): ?>
      <h4 class="hero-subtitle">Featured Home:</h4>
    <?php endif; ?>
    <?php if ($hero_title): ?><h1><?php echo esc_html($hero_title); ?></h1><?php endif; ?>
    <?php if ($hero_tagline): ?><h3><?php echo esc_html($hero_tagline); ?></h3><?php endif; ?>
    <div class="hero-buttons">
      <?php if ($hero_book_link): ?><a href="<?php echo esc_url($hero_book_link); ?>" class="btn-primary">Book Now</a><?php endif; ?>
      <?php if ($hero_more_link): ?><a href="<?php echo esc_url($hero_more_link); ?>" class="btn-secondary">More Info</a><?php endif; ?>
    </div>
  </div>

  <div class="hero-loop-icon" title="Replay">&#x21bb;</div>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const video = document.querySelector('.hero-bg-video');
    const image = document.querySelector('.hero-bg-image');
    const loopIcon = document.querySelector('.hero-loop-icon');

    if (video && image && loopIcon) {
      image.style.display = 'block';
      video.style.display = 'none';
      loopIcon.style.display = 'none';

      setTimeout(() => {
        image.style.display = 'none';
        video.style.display = 'block';
        video.play();
      }, 2000);

      video.addEventListener('ended', () => {
        video.style.display = 'none';
        image.style.display = 'block';
        loopIcon.style.display = 'block';
      });

      loopIcon.addEventListener('click', () => {
        loopIcon.style.display = 'none';
        image.style.display = 'none';
        video.style.display = 'block';
        video.play();
      });
    }
  });
  </script>
</section>

<style>

.featured-hero {
  position: relative;
  width: 100%;
  height: 75vh;
  overflow: hidden;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

    .topTitle {
        display: none;
    }   

.hero-bg-video,
.hero-bg-image {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  z-index: 1;
}

.hero-bg-image {
  display: block;
}

.hero-bg-video {
  display: none;
}

.hero-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 50%;
  z-index: 2;
}

.hero-content {
  position: absolute;
  bottom: 40px;
  left: 40px;
  z-index: 3;
  max-width: 40%;
  text-align: left;
  word-wrap: normal;
  overflow-wrap: normal;
  padding: 0;
}

.hero-content h4.hero-subtitle {
  font-size: 2rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: white;
  text-transform: uppercase;
  letter-spacing: 1px;
	  text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
  font-family: var(--main_font, 'Helvetica Neue', sans-serif);
	line-height: .9;
}


.hero-content h1 {
  font-size: 8rem;
  font-weight: 700;
  margin-bottom: 0;
  text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
  font-family: var(--main_font, 'Helvetica Neue', sans-serif);
  line-height: 1.2;
}

.hero-content h3 {
  font-size: 3rem;
  margin-bottom: 1rem;
  margin-left: 0.5rem;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
  font-family: var(--main_font, 'Helvetica Neue', sans-serif);
  line-height: 1;
}

.hero-buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: left;
  margin-top: 2rem;
}

.hero-buttons a {
  display: inline-block;
  margin: 0 10px;
  padding: 12px 28px;
  font-size: 2rem;
  border-radius: 5px;
  text-decoration: none;
  transition: background 0.3s ease;
}

.btn-primary {
  background: var(--main_color, #FF5555);
  color: white;
}

.btn-primary:hover {
  background: var(--main_color, #FF5555);
  filter: brightness(1.2);
  transition: filter 0.3s ease, background 0.3s ease;
}

.btn-secondary {
  background: rgba(255,255,255,0.85);
  color: #222;
}

.btn-secondary:hover {
  background: #fff;
}

.hero-loop-icon {
  position: absolute;
  bottom: 40px;
  right: 40px;
  font-size: 3rem;
  color: var(--main_color, #FF5555);
  background: #fff;
  padding: 5px 12px;
  border-radius: 50%;
  cursor: pointer;
  z-index: 4;
  display: none;
  transition: background 0.3s ease;
}

.hero-loop-icon:hover {
  background: #f0f0f0;
}

@media (max-width: 768px) {
	.hero-content {
  position: absolute;
  bottom: 40px;
  left: 20px;
  z-index: 3;
  max-width: 40%;
  text-align: left;
  word-wrap: normal;
  overflow-wrap: normal;
  padding: 0;
}
  .hero-content h4.hero-subtitle {font-size: 1.2rem; }
  .hero-content h1 { font-size: 3rem; }
  .hero-content h3 { font-size: 1.5rem; }
  .hero-buttons {
    flex-direction: row;
    justify-content: center;
    gap: 10px;
    flex-wrap: nowrap;
    padding-left: 55px;
  }
  .hero-buttons a {
    font-size: 1.1rem;
    padding: 14px 20px;
    white-space: nowrap;
  }
}

</style> <!-- Hero showcase v1.3 no Video on Mobile -->
